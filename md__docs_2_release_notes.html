<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Jolt Physics: Release Notes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="LogoSmall.png"/></td>
  <td id="projectalign">
   <div id="projectname">Jolt Physics
   </div>
   <div id="projectbrief">A multi core friendly Game Physics Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__docs_2_release_notes.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Release Notes</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md5"></a></p>
<p>For breaking API changes see <a href="https://github.com/jrouwe/JoltPhysics/blob/master/Docs/APIChanges.md">this document</a>.</p>
<h1><a class="anchor" id="autotoc_md46"></a>
Unreleased changes</h1>
<h2><a class="anchor" id="autotoc_md47"></a>
New functionality</h2>
<ul>
<li>Added interface to run compute shaders on the GPU with implementations for DX12, Vulkan and Metal. These interfaces can be disabled by setting <code>JPH_USE_DX12</code>, <code>JPH_USE_VK</code>, <code>JPH_USE_MTL</code> and <code>JPH_USE_CPU_COMPUTE</code> to <code>OFF</code>. To build on macOS, you'll need to have dxc and spirv-cross installed. The easiest way to install them is by installing the Vulkan SDK.</li>
<li>Added a strand based hair simulation running on GPU<ul>
<li>System is based on Cosserad rods.</li>
<li>Can use long range attachment constraints to limit the stretch of hairs.</li>
<li>Supports simulation (guide) and render (follow) hairs.</li>
<li><a class="el" href="class_hair.html">Hair</a> vs hair collision is handled by accumulating the average velocity in a grid and using those velocities to drive hairs.</li>
<li>Supports collision with the environment, although it only supports ConvexHull and CompoundShapes at the moment.</li>
<li>The roots of the hairs can be skinned to the scalp mesh.</li>
<li>Note that this is still work in progress, some things that still need to be done are listed in <a class="el" href="_hair_8h.html">Hair.h</a>.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md48"></a>
Bug Fixes</h2>
<ul>
<li>Made it possible to make a class outside the <code>JPH</code> namespace serializable.</li>
<li><code><a class="el" href="class_vehicle_constraint.html">VehicleConstraint</a></code>s are automatically disabled when the vehicle body is not in the <code><a class="el" href="class_physics_system.html">PhysicsSystem</a></code>.</li>
<li>Fixed an issue where a character could get stuck. If the character was teleported inside an area surrounded by slopes that are steeper than <code>mMaxSlopeAngle</code>, the code to stop the constraint solver from ping ponging between two planes didn't work properly.</li>
<li>Fixed an issue where collide/cast shape against a triangle would return a hit result with <code>mShape2Face</code> in incorrect winding order. This caused an incorrect normal in the enhanced internal edge removal algorithm. This in turn resulted in objects not settling properly on dense triangle grids.</li>
<li>When using <code><a class="el" href="class_body.html#add8352d484a2805f114400159151185b">Body::AddForce</a></code> to apply gravity, bodies could gain extra energy during elastic collisions. We now cancel added forces in the direction of the contact normal if the body starts in collision to negate this energy gain.</li>
<li>Made <code>MoveKinematic</code> more accurate when rotating a body by a very small angle.</li>
</ul>
<h1><a class="anchor" id="autotoc_md49"></a>
v5.5.0</h1>
<h2><a class="anchor" id="autotoc_md50"></a>
New functionality</h2>
<ul>
<li>Added new define <code>JPH_TRACK_SIMULATION_STATS</code> which tracks simulation statistics on a per body basis. This can be used to figure out bodies are the most expensive to simulate.</li>
<li>Added <code><a class="el" href="class_ragdoll_settings.html#a2abfef1ce2210e7459fb5c412ed94b21">RagdollSettings::CalculateConstraintPriorities</a></code> which calculates constraint priorities that boost the priority of joints towards the root of the ragdoll.</li>
<li><code><a class="el" href="class_box_shape.html" title="A box, centered around the origin.">BoxShape</a></code>, <code><a class="el" href="class_cylinder_shape.html" title="A cylinder.">CylinderShape</a></code> and <code><a class="el" href="class_tapered_cylinder_shape.html" title="A cylinder with different top and bottom radii.">TaperedCylinderShape</a></code> will now automatically reduce the convex radius if the specified value is too big for the shape (instead of erroring out).</li>
<li>Added ability to configure the thickness of triangles when colliding with soft bodies through <code><a class="el" href="class_collide_soft_body_vertices_vs_triangles.html#a3ec5a2aadf2eab043a217d1fa8722107">CollideSoftBodyVerticesVsTriangles::sTriangleThickness</a></code>.</li>
<li>Added <code>JPH_DEFAULT_ALLOCATE_ALIGNMENT</code> which allows defining the default <code>Allocate</code> alignment if your allocator's alignment is different from the alignment as defined by <code>__STDCPP_DEFAULT_NEW_ALIGNMENT__</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md51"></a>
Bug Fixes</h2>
<ul>
<li>Visual Studio 2026 support.</li>
<li>A 6DOF constraint that constrains all rotation axis in combination with a body that has some of its rotation axis locked would not constrain the rotation in the unlocked axis.</li>
<li>Added include <code>type_traits</code> for <code>std::is_trivial</code> to avoid compile error on macOS with clang 21.</li>
<li>Fixed compilation error when using Jolt in conjunction with the <code>_CRTDBG_MAP_ALLOC</code> define on Windows.</li>
<li>Fixed cast shape possibly not returning a hit when a shape cast starts touching (but not intersecting) another shape and requesting the deepest hit.</li>
<li>Fixed division by zero when doing a really long (6 KM) sphere cast against a triangle. In this case the floating point accuracy became low enough so that the distance between the sphere center and the triangle (which should be 'radius') became zero instead.</li>
<li>Fixed memory leak when providing invalid parameters to <code><a class="el" href="class_tapered_cylinder_shape_settings.html" title="Class that constructs a TaperedCylinderShape.">TaperedCylinderShapeSettings</a></code> and creating the shape.</li>
<li>Fixed collision between soft body and <code><a class="el" href="class_triangle_shape.html" title="A single triangle, not the most efficient way of creating a world filled with triangles but can be us...">TriangleShape</a></code>/<code><a class="el" href="class_mesh_shape.html">MeshShape</a></code>/<code><a class="el" href="class_height_field_shape.html">HeightFieldShape</a></code>. This would not find the closest collision point in case the shape was scaled. It would also make the triangles much thicker than intended causing collisions with back facing triangles that were very far away.</li>
</ul>
<h1><a class="anchor" id="autotoc_md52"></a>
v5.4.0</h1>
<h2><a class="anchor" id="autotoc_md53"></a>
New functionality</h2>
<ul>
<li>Added Cosserat rods to soft bodies. This is a stick constraint with an orientation that can be used to attach geometry. Can be used e.g. to simulate vegetation in a cheap way. See the new <code>SoftBodyCosseratRodConstraintTest</code> demo.</li>
<li>Added ability to drive hinge constraints with <code><a class="el" href="class_ragdoll.html#a367f16f5385eb377e5419d12457c22c6" title="Drive the ragdoll to a specific pose by activating the motors on each constraint.">Ragdoll::DriveToPoseUsingMotors</a></code>. This also adds <code><a class="el" href="class_hinge_constraint.html#ab9cae9664c957de813baeb21a13d3686">HingeConstraint::SetTargetOrientationBS</a></code> which sets the target angle in body space.</li>
<li>Added <code>JPH_USE_EXTERNAL_PROFILE</code> cmake option that allows overriding the behavior of the profile macros.</li>
<li>Added <code><a class="el" href="class_soft_body_creation_settings.html#a284bce9885936d4b57243e57e00c8747" title="If the faces in this soft body should be treated as double sided for the purpose of collision detecti...">SoftBodyCreationSettings::mFacesDoubleSided</a></code> which treats the faces of the soft body as double sided. This can be used to make e.g. flags double sided.</li>
<li>Added functions to get the <code><a class="el" href="class_character_settings.html" title="Contains the configuration of a character.">CharacterSettings</a></code> from a <code><a class="el" href="class_character.html">Character</a></code> and <code><a class="el" href="class_character_virtual_settings.html" title="Contains the configuration of a character.">CharacterVirtualSettings</a></code> from a <code><a class="el" href="class_character_virtual.html">CharacterVirtual</a></code>.</li>
<li>Added support for compound shapes as character shape in <code><a class="el" href="class_character_virtual.html">CharacterVirtual</a></code>.</li>
<li>Added <code><a class="el" href="class_body_interface.html#a194ead0d415804369dbaf9ef9ecc3dbf">BodyInterface::SetIsSensor</a></code>/<code>IsSensor</code> functions.</li>
</ul>
<h2><a class="anchor" id="autotoc_md54"></a>
Bug Fixes</h2>
<ul>
<li>Fixed bug in <code>ManifoldBetweenTwoFaces</code> which would not find the correct manifold in case face 1 had 3 or more vertices and face 2 only 2. E.g. for a box resting the long edge of a cylinder this would mean that only a single contact point was found instead of 2 (the other way around would work fine).</li>
<li>Fixed bug in <code><a class="el" href="class_convex_hull_shape.html#a79a2ef9c53d7210ad1010f3b76311da4">ConvexHullShape::CollideSoftBodyVertices</a></code> where the wrong edge could be reported as the closest edge.</li>
<li>Fixed bug in <code><a class="el" href="class_physics_system.html#ab3cd9f2562f0f051c032b3bc298d9604">PhysicsSystem::OptimizeBroadPhase</a></code>. When calling this function after removing all bodies from the <code><a class="el" href="class_physics_system.html">PhysicsSystem</a></code>, the internal nodes would not be freed until bodies are added again. This could lead to running out of internal nodes in rare cases.</li>
<li>Fixed bug in <code><a class="el" href="class_mesh_shape.html">MeshShape</a></code> active edge calculation which could mark edges of non-manifold meshes as inactive instead of active.</li>
<li>Fixed passing underestimate of penetration depth in <code><a class="el" href="class_contact_listener.html#aa11e4d0107c2764e1c7e04eef72cb404">ContactListener::OnContactPersisted</a></code> when the contact comes from the contact cache.</li>
<li><code><a class="el" href="class_quad_tree.html">QuadTree</a></code> will now fall back to the heap when running out of stack space during collision queries. Previously this would trigger an assert and some collisions would not be detected.</li>
<li>Fixed <code><a class="el" href="class_body_interface.html#a511b9da7dae147b6d8d3227f30724334" title="Set velocity of body such that it will be positioned at inTargetPosition/Rotation in inDeltaTime seco...">BodyInterface::MoveKinematic</a></code>, <code>SetLinearVelocity</code>, <code>SetAngularVelocity</code>, <code>SetLinearAndAngularVelocity</code>, <code>AddLinearVelocity</code>, <code>AddLinearAndAngularVelocity</code>, <code>SetPositionRotationAndVelocity</code> and <code>SetMotionType</code> when body not added to the physics system yet.</li>
<li>Fixed UBSAN false positive error that detected a dirty trick in <code><a class="el" href="class_sim_shape_filter.html" title="Filter class used during the simulation (PhysicsSystem::Update) to filter out collisions at shape lev...">SimShapeFilter</a></code>.</li>
<li><code><a class="el" href="class_wheel_settings_t_v.html" title="WheelSettings object specifically for TrackedVehicleController.">WheelSettingsTV</a></code> and <code><a class="el" href="class_wheel_settings_w_v.html" title="WheelSettings object specifically for WheeledVehicleController.">WheelSettingsWV</a></code> were not serializing their base class members.</li>
<li>The remap tables in <code><a class="el" href="class_soft_body_shared_settings_1_1_optimization_results.html" title="Information about the optimization of the soft body, the indices of certain elements may have changed...">SoftBodySharedSettings::OptimizationResults</a></code> mapped from new to old index instead of from old to new as was documented. The maps now behave as documented.</li>
<li>Fixed an issue where soft body bend constraints could be created with identical vertices. This led to an assert triggering.</li>
<li>Fixed infinite recursion when colliding a <code><a class="el" href="class_triangle_shape.html" title="A single triangle, not the most efficient way of creating a world filled with triangles but can be us...">TriangleShape</a></code> vs a <code><a class="el" href="class_triangle_shape.html" title="A single triangle, not the most efficient way of creating a world filled with triangles but can be us...">TriangleShape</a></code>.</li>
<li>32-bit MinGW g++ doesn't call the correct overload for the new operator when a type is 16 bytes aligned. This could cause unaligned read access violations.</li>
<li>Fixed compiling in double precision and fixed issues with floating point contraction that caused unit test failures on LoongArch architecture.</li>
<li>Added an epsilon to the <code>CastRay</code> / <code>CastShape</code> early out condition to avoid dividing by a very small number and overflowing to INF. This can cause a float overflow exception.</li>
<li>Fixed Samples requiring Vulkan extension <code>VK_EXT_device_address_binding_report</code> without checking if it is available.</li>
<li>Fixed Vulkan warning in Samples: VkSemaphore is being signaled by VkQueue but it may still be in use by VkSwapchainKHR.</li>
<li>Fixed incorrect <a class="el" href="class_r_t_t_i.html">RTTI</a> definition of <code><a class="el" href="class_motorcycle_controller_settings.html">MotorcycleControllerSettings</a></code> which led to the members of <code><a class="el" href="class_wheeled_vehicle_controller_settings.html">WheeledVehicleControllerSettings</a></code> not being serialized.</li>
<li>Implemented missing <code><a class="el" href="class_vehicle_constraint.html#af953060386f731482956bb772840262c" title="Debug function to convert a constraint to its settings, note that this will not save to which bodies ...">VehicleConstraint::GetConstraintSettings</a></code> function.</li>
<li>Fixed colliding a compound shape vs a regular shape ignoring <code><a class="el" href="class_collide_shape_settings.html#a511c99470c2fe3b2e82d06ffe26c52c1">CollideShapeSettings::mMaxSeparationDistance</a></code>. This potentially led to missed collisions.</li>
</ul>
<h1><a class="anchor" id="autotoc_md55"></a>
v5.3.0</h1>
<h2><a class="anchor" id="autotoc_md56"></a>
New functionality</h2>
<h3><a class="anchor" id="autotoc_md57"></a>
Samples</h3>
<ul>
<li>The Samples and JoltViewer can run on Linux using Vulkan. Make sure to install the Vulkan SDK before compiling (see: <code>Build/ubuntu24_install_vulkan_sdk.sh</code>).</li>
<li>The Samples and JoltViewer can run on macOS using Metal.</li>
</ul>
<h3><a class="anchor" id="autotoc_md58"></a>
MeshShape</h3>
<ul>
<li><code><a class="el" href="class_mesh_shape.html">MeshShape</a></code>s of up to 110M triangles are possible now, but the actual maximum is very dependent on how the triangles in the mesh are connected.</li>
<li>Optimized creation of <code><a class="el" href="class_mesh_shape.html">MeshShape</a></code>. Improves build speed by about 25% and reduces number of allocations by a factor of 1000. Allocations caused contention when building meshes from multiple threads.</li>
<li>Added <code><a class="el" href="class_mesh_shape_settings.html#ae0e76b7529df050688a104a1e35bf06e" title="Determines the quality of the tree building process.">MeshShapeSettings::mBuildQuality</a></code> which allows selecting between faster mesh creation or faster run time performance.</li>
</ul>
<h3><a class="anchor" id="autotoc_md59"></a>
Character</h3>
<ul>
<li>Added <code>OnContactPersisted</code>, <code>OnContactRemoved</code>, <code>OnCharacterContactPersisted</code> and <code>OnCharacterContactRemoved</code> functions on <code><a class="el" href="class_character_contact_listener.html">CharacterContactListener</a></code> to better match the interface of <code><a class="el" href="class_contact_listener.html">ContactListener</a></code>.</li>
<li>Every <code><a class="el" href="class_character_virtual.html">CharacterVirtual</a></code> now has a <code><a class="el" href="class_character_i_d.html" title="ID of a character. Used primarily to identify deleted characters and to sort deterministically.">CharacterID</a></code>. This ID can be used to identify the character after removal and is used to make the simulation deterministic in case a character collides with multiple other virtual characters.</li>
<li>Added support for <code><a class="el" href="class_character_virtual.html">CharacterVirtual</a></code> to override the inner rigid body ID. This can be used to make the simulation deterministic in e.g. client/server setups.</li>
</ul>
<h3><a class="anchor" id="autotoc_md60"></a>
Collision Detection</h3>
<ul>
<li>Added <code><a class="el" href="class_physics_system.html#aa5e3d3dc2758b0ca0bcb6eb8e77bd379">PhysicsSystem::SetSimShapeFilter</a></code>. This allows filtering out collisions between sub shapes within a body and can for example be used to have a single body that contains a low detail simulation shape an a high detail collision query shape. An example of a body that's both a sensor and a rigid body can be found in <code>ContactListenerTest</code>.</li>
<li>Added <code><a class="el" href="class_physics_system.html#aa20737fdf1b3deb79a4b8da27ef42572">PhysicsSystem::SetSimCollideBodyVsBody</a></code>. This allows overriding the collision detection between two bodies. It can be used to only store the 1st hit for sensor collisions. This makes sensors cheaper if you only need to know if there is an overlap or not. An example can be found in <code>SimCollideBodyVsBodyTest</code>.</li>
<li>Added <code><a class="el" href="class_closest_hit_per_body_collision_collector.html" title="Implementation that collects the closest / deepest hit for each body and optionally sorts them on dis...">ClosestHitPerBodyCollisionCollector</a></code> which will report the closest / deepest hit per body that the collision query collides with.</li>
<li>Added overridable <code><a class="el" href="class_collision_collector.html#ae5d038bd6a96af9c55fb49623fbd31ba" title="When running a query through the NarrowPhaseQuery class, this will be called after all AddHit calls h...">CollisionCollector::OnBodyEnd</a></code> that is called after all hits for a body have been processed when collecting hits through <code><a class="el" href="class_narrow_phase_query.html">NarrowPhaseQuery</a></code>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md61"></a>
New Platforms</h3>
<ul>
<li>Added support for RISC-V, LoongArch and PowerPC (Little Endian) CPUs.</li>
<li>Added support for WASM64.</li>
</ul>
<h3><a class="anchor" id="autotoc_md62"></a>
Various</h3>
<ul>
<li>Removed the use of <code>std::unordered_map</code> and <code>std::unordered_set</code> and replaced them with our own implementation: <code><a class="el" href="class_unordered_map.html">UnorderedMap</a></code> and <code><a class="el" href="class_unordered_set.html">UnorderedSet</a></code>.</li>
<li>Added <code><a class="el" href="class_motion_properties.html#a0c437b5479bd58417b50be0da6b852f7">MotionProperties::ScaleToMass</a></code>. This lets you easily change the mass and inertia tensor of a body after creation.</li>
<li>Split up <code><a class="el" href="class_body.html#a7797f43ac6078b682b4c9cb6c7b9b18e">Body::ApplyBuoyancyImpulse</a></code> into <code><a class="el" href="class_body.html#a6f626cfeebe957b45503d752a5052f75">Body::GetSubmergedVolume</a></code> and <code><a class="el" href="class_body.html#a7797f43ac6078b682b4c9cb6c7b9b18e">Body::ApplyBuoyancyImpulse</a></code>. This allows you to use the calculated submerged volume for other purposes.</li>
<li>Added binary serialization to <code><a class="el" href="class_skeletal_animation.html" title="Resource for a skinned animation.">SkeletalAnimation</a></code>.</li>
<li>Added the ability to add a sub shape at a specified index in a <code><a class="el" href="class_mutable_compound_shape.html">MutableCompoundShape</a></code> rather than at the end.</li>
<li>Added <code><a class="el" href="class_s_t_l_local_allocator.html" title="STL allocator that keeps N elements in a local buffer before falling back to regular allocations.">STLLocalAllocator</a></code> which is an allocator that can be used in e.g. the <code><a class="el" href="class_array.html">Array</a></code> class. It keeps a fixed size buffer for N elements and only when it runs out of space falls back to the heap.</li>
<li>Added the following constants on <a class="el" href="class_physics_system.html">PhysicsSystem</a>: <code>cMaxBodiesLimit</code>, <code>cMaxBodyPairsLimit</code> and <code>cMaxContactConstraintsLimit</code>. These constants are the max allowable values for <code><a class="el" href="class_physics_system.html#ae578fcd0c58f678156b7cd8b44f811a6">PhysicsSystem::Init</a></code>. Exceeding these will trigger an assert and the system will clamp the values. Note that on a 32 bit system, you'll run out of memory before you reach these values.</li>
</ul>
<h2><a class="anchor" id="autotoc_md63"></a>
Bug fixes</h2>
<ul>
<li>Fixed bodies gaining more energy than intended due to restitution. E.g. A restitution of 1 could lead to bodies bouncing ever higher.</li>
<li><code><a class="el" href="class_body_interface.html#a9ecde691e54928413bc001db60830488">BodyInterface::AddForce</a></code> applied a force per soft body vertex rather than to the whole body, this resulted in a soft body accelerating much more compared to a rigid body of the same mass.</li>
<li><code>std::push_heap</code>/<code>pop_heap</code> behave differently on macOS vs Windows/Linux when elements compare equal, this made the cross platform deterministic build not deterministic in some cases.</li>
<li>Removing a sub shape from a <code><a class="el" href="class_mutable_compound_shape.html">MutableCompoundShape</a></code> would not update the bounding box if the last shape was removed, which can result in a small performance loss.</li>
<li>An empty <code><a class="el" href="class_mutable_compound_shape.html">MutableCompoundShape</a></code> now returns the same local bounding box as <code><a class="el" href="class_empty_shape.html">EmptyShape</a></code> (a point at (0, 0, 0)). This prevents floating point overflow exceptions.</li>
<li><a class="el" href="class_vehicle_constraint.html">VehicleConstraint</a> would override <code><a class="el" href="class_body.html#a4fcb04dbca94ff4cf4b48289f26c26b4">Body::SetAllowSleeping</a></code> every frame, making it impossible for client code to configure a vehicle that cannot go to sleep.</li>
<li>Fixed <code><a class="el" href="struct_character_virtual_1_1_contact.html#ae19592c8bdfb0e4fc0b22b88e12f3ebd" title="If B is a sensor.">CharacterVirtual::Contact::mIsSensorB</a></code> not being persisted in <code>SaveState</code>.</li>
<li>Fixed <code>CharacterVirtual::Contact::mHadContact</code> not being true for collisions with sensors. They will still be marked as <code>mWasDiscarded</code> to prevent any further interaction.</li>
<li>Fixed <code><a class="el" href="class_character.html#a15f5407b7ccbe01588462989a4e0cfda">Character::SetShape</a></code> failing to switch when standing inside a sensor / <code><a class="el" href="class_character.html#a6fd02888e30d3a718e81680857ca3968">Character::PostSimulation</a></code> finding a sensor as ground collision.</li>
<li>Fixed numerical inaccuracy in penetration depth calculation when <code><a class="el" href="class_collide_shape_settings.html#a511c99470c2fe3b2e82d06ffe26c52c1">CollideShapeSettings::mMaxSeparationDistance</a></code> was set to a really high value (e.g. 1000).</li>
<li>Bugfix in <code><a class="el" href="class_semaphore.html#a81c1cbdab78310c8b13e7052572e599d" title="Acquire the semaphore inNumber times.">Semaphore::Acquire</a></code> for non-windows platform. The count was updated before waiting, meaning that the counter would become -(number of waiting threads) and the semaphore would not wake up until at least the same amount of releases was done. In practice this meant that the main thread had to do the last (number of threads) jobs, slowing down the simulation a bit.</li>
<li>Fixed a bug in <code>ManifoldBetweenTwoFaces</code> that led to incorrect <code><a class="el" href="class_contact_manifold.html#a82c0a5937e977e8ce4169d39e1a3d64c" title="Contact points on the surface of shape 2 relative to mBaseOffset. If there&#39;s no penetration,...">ContactManifold::mRelativeContactPointsOn2</a></code> when the contact normal and the face normal were not roughly parallel. Also it possibly led to jitter in the simulation in that case.</li>
<li>Fixed <code><a class="el" href="class_internal_edge_removing_collector.html">InternalEdgeRemovingCollector</a></code> not working when colliding with a very dense triangle grid because it ran out of internal space. Now falling back to memory allocations when this happens to avoid ghost collisions.</li>
<li>Fixed running out of stack space when simulating a really high number of active rigid bodies.</li>
<li>Moved the 'broad phase bit' to the highest bit in <code><a class="el" href="class_body_i_d.html" title="ID of a body. This is a way of reasoning about bodies in a multithreaded simulation while avoiding ra...">BodyID</a></code> to avoid running out of <code>NodeID</code>s in <code><a class="el" href="class_broad_phase_quad_tree.html" title="Fast SIMD based quad tree BroadPhase that is multithreading aware and tries to do a minimal amount of...">BroadPhaseQuadTree</a></code> when calling <code><a class="el" href="class_physics_system.html#ab3cd9f2562f0f051c032b3bc298d9604">PhysicsSystem::OptimizeBroadPhase</a></code> on a tree with a very high body count.</li>
<li><code><a class="el" href="class_temp_allocator_impl.html" title="Default implementation of the temp allocator that allocates a large block through malloc upfront.">TempAllocatorImpl</a></code> uses 64 bit integers internally to allow for a higher max contact constraint count.</li>
<li>When inserting lots of bodies without using batching, a broad phase tree of depth &gt; 128 can be created. If the <code><a class="el" href="class_physics_system.html">PhysicsSystem</a></code> was destructed in this situation, a stack overflow would cause a crash.</li>
<li>When calling <code><a class="el" href="class_physics_system.html#a4cdc76b2486dfaecfc9319d040e5e5f3">PhysicsSystem::Update</a></code> with a delta time of 0, contact remove callbacks were triggered by accident for all existing contacts.</li>
<li>Fixed <code><a class="el" href="class_hinge_constraint.html" title="A hinge constraint constrains 2 bodies on a single point and allows only a single axis of rotation.">HingeConstraint</a></code> not having limits if <code>LimitsMin</code> was set to <code>-JPH_PI</code> or <code>LimitsMax</code> was set to <code>JPH_PI</code>. It should only be turned off if both are.</li>
<li>Fixed <code><a class="el" href="class_cylinder_shape.html#aa2ef3b2d1a7889c6a55d868ac8549280">CylinderShape::GetSupportingFace</a></code> returning the wrong face. When the height of a cylinder was small compared to its radius, it would sink more into the ground than needed during simulation.</li>
<li>When there were no active bodies, the step listeners weren't called. This meant they couldn't wake up bodies. The step listeners are now only skipped if the physics system is updated with zero delta time.</li>
<li>Fixed a race condition in soft body simulation that could break determinism.</li>
<li>Added overloads for placement new in the <code>JPH_OVERRIDE_NEW_DELETE</code> macro, this means it is no longer needed to do <code>:: new (address) JPH::class_name(constructor_arguments)</code> but you can do <code>new (address) JPH::class_name(constructor_arguments)</code>.</li>
<li>Fixed a GCC warning <code>-Wshadow=global</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md64"></a>
v5.2.0</h1>
<h2><a class="anchor" id="autotoc_md65"></a>
New functionality</h2>
<ul>
<li>Added <a class="el" href="class_plane_shape.html">PlaneShape</a>. An infinite plane. Negative half space is considered solid.</li>
<li>Added <a class="el" href="class_tapered_cylinder_shape.html" title="A cylinder with different top and bottom radii.">TaperedCylinderShape</a>. A cylinder with different top and bottom radii.</li>
<li>Added <a class="el" href="class_empty_shape.html">EmptyShape</a>. A shape that collides with nothing and that can be used as a placeholder or for dummy bodies.</li>
<li>Use <a class="el" href="class_mesh_shape_settings.html#a972eb1eff546f1475d5941e68f54db76">MeshShapeSettings::mPerTriangleUserData</a> at about 25% memory increase to get per triangle user data through <a class="el" href="class_mesh_shape.html#a3f4c544b5cab768beeefe4d8c8639cff">MeshShape::GetTriangleUserData</a></li>
<li>Added <code><a class="el" href="class_shape.html#a11453c55f44f37cf405eee79afdbfe00">Shape::GetLeafShape</a></code> to be able to get a leaf shape given a sub shape ID</li>
<li>Added <code><a class="el" href="class_height_field_shape.html#aa98bc099a0466ff6e4284d5942b738ce">HeightFieldShape::GetSubShapeCoordinates</a></code> to get the triangle coordinates of a particular sub shape ID</li>
<li>Split back face mode between convex/triangles for ray casts. This allows you to e.g. have meshes that do give back face hits while convex shapes don't.</li>
<li><a class="el" href="class_soft_body_manifold.html" title="An interface to query which vertices of a soft body are colliding with other bodies.">SoftBodyManifold</a> now returns sensor contacts separately. Before this change, there was a limit of a single colliding body per soft body vertex. If the closest body happened to be a sensor this effectively disabled the collision with the world and caused artifacts. We can now also detect multiple sensor contacts per soft body and they are returned through a new interface <code><a class="el" href="class_soft_body_manifold.html#a1c539cf5388178b7fa78be864020049e" title="Get the i-th sensor that is in contact with the soft body.">SoftBodyManifold::GetSensorContactBodyID</a></code>.</li>
<li>Added support for running Jolt with ThreadSanitizer.</li>
<li>Added support for using <a class="el" href="class_scaled_shape.html" title="A shape that scales a child shape in local space of that shape. The scale can be non-uniform and can ...">ScaledShape</a> inside <a class="el" href="class_character_virtual.html">CharacterVirtual</a>.</li>
<li>Added ability to save/restore a simulation in parts using <code><a class="el" href="class_state_recorder.html#a9f80c185b11dbe0025d9bc6f947427d0">StateRecorder::SetIsLastPart</a></code>. Also added <code><a class="el" href="class_state_recorder_filter.html#a9ee0061048957aa73068754fba099e66" title="If the state of a specific contact should be restored.">StateRecorderFilter::ShouldRestoreContact</a></code> to allow selective restoring of contacts.</li>
<li>Added <code>JPH_DEBUG_SYMBOL_FORMAT</code> cmake option. This allows switching from the default dwarf symbol format to e.g. the source-map format for emscripten, which speeds up compilation.</li>
</ul>
<h2><a class="anchor" id="autotoc_md66"></a>
Bug fixes</h2>
<ul>
<li>Fixed an issue where enhanced internal edge removal would throw away valid contacts when a dynamic compound shape is colliding with another mesh / box shape.</li>
<li>Fixed an issue where the bounding volume of a <a class="el" href="class_height_field_shape.html">HeightFieldShape</a> was not properly adjusted when calling SetHeights leading to missed collisions.</li>
<li>Workaround for CMake error <code>CMake Error: No output files for WriteBuild!</code> when using the 'Ninja Multi-Config' generator.</li>
<li>When a height field was created where SampleCount / BlockSize is not a power of 2 and a soft body touched the right or bottom border of the height field, the application would crash.</li>
<li>Fixed a link error <code>ld: error: undefined symbol: pthread_create</code> on FreeBSD.</li>
<li>Fixed missing files <a class="el" href="_configuration_string_8h.html">ConfigurationString.h</a> and <a class="el" href="_soft_body_update_context_8h.html">SoftBodyUpdateContext.h</a> when running <code>cmake --install</code>.</li>
<li>Fixed various missing header files when running <code>cmake --install</code> when <code>ENABLE_OBJECT_STREAM=OFF</code>.</li>
<li>When using <code>cmake --install</code> to install a shared library on Windows, the dll is installed in the 'bin' folder now.</li>
<li>Fixed cmake warning: <code>Policy CMP0177 is not set: install() DESTINATION paths are normalized.</code></li>
<li>Fixed &lsquo;unresolved symbol &rsquo;__emutls_v._ZN3JPH11PhysicsLock6sLocksE'<code>when compiling Jolt as a shared library with MinGW.</code></li>
<li><code>Added workaround for issue where Firefox has problems with the</code>_mm_blendv_ps` intrinsic when compiling to WASM.</li>
</ul>
<h1><a class="anchor" id="autotoc_md67"></a>
v5.1.0</h1>
<h2><a class="anchor" id="autotoc_md68"></a>
New functionality</h2>
<h3><a class="anchor" id="autotoc_md69"></a>
Soft Body</h3>
<ul>
<li>Added support for applying a global force to a soft body through <a class="el" href="class_body.html#add8352d484a2805f114400159151185b">Body::AddForce</a>.</li>
<li>Implemented better algorithm to split soft body constraints into parallel groups. This makes the soft body simulation 10-20% faster and also enables multithreading LRA, bend, volume and skinned constraints.</li>
<li>Added approximate ACos function which speeds up dihedral bend constraints by approx. 10%.</li>
<li>Improved sorting of LRA soft body constraints to improve convergence.</li>
<li>Added ability to draw soft body constraint evaluation order.</li>
</ul>
<h3><a class="anchor" id="autotoc_md70"></a>
HeightField Shape</h3>
<ul>
<li>Sped up deserialization of HeightFieldShape/MeshShape classes by optimizing reading a vector of data in <a class="el" href="class_stream_in.html" title="Simple binary input stream.">StreamIn</a>, by switching std::vector out for a custom <a class="el" href="class_array.html">Array</a> class and by combining a number of allocations into one.</li>
<li>Added <a class="el" href="class_height_field_shape.html#a9111226dd889b546f466da2b53d1a01b" title="Get the range of height values that this height field can encode. Can be used to determine the allowe...">HeightFieldShape::GetMinHeightValue</a>/GetMaxHeightValue that can be used to know which range of heights are accepted by SetHeights.</li>
<li>Allowing negative stride when getting/setting height field shape heights or materials. This improves performance if your data happens to be layed out the wrong way around.</li>
<li>Added <a class="el" href="class_height_field_shape_settings.html#a356d9e6fda2e3fca23239b77dd86d273">HeightFieldShapeSettings::mMaterialsCapacity</a> which can enlarge the internal materials array capacity to avoid resizing when <a class="el" href="class_height_field_shape.html#adbd4df5017efbafc07c4187c8c6faf36">HeightFieldShape::SetMaterials</a> is called with materials that weren't in use by the height field yet.</li>
<li>Added Clone function to <a class="el" href="class_height_field_shape.html">HeightFieldShape</a>. This allows creating a copy before modifying the shape.</li>
</ul>
<h3><a class="anchor" id="autotoc_md71"></a>
Character</h3>
<ul>
<li>Added <a class="el" href="class_character_base_settings.html#a203e7cb826ccd98d6f3551f2aa198ee3" title="Set to indicate that extra effort should be made to try to remove ghost contacts (collisions with int...">CharacterBaseSettings::mEnhancedInternalEdgeRemoval</a> (default false) that allows smoother movement for both the <a class="el" href="class_character.html">Character</a> and <a class="el" href="class_character_virtual.html">CharacterVirtual</a> class.</li>
<li>Added ability for a <a class="el" href="class_character_virtual.html">CharacterVirtual</a> to collide with another <a class="el" href="class_character_virtual.html">CharacterVirtual</a> by using the new <a class="el" href="class_character_vs_character_collision.html">CharacterVsCharacterCollision</a> interface.</li>
<li>Added the option to add an inner rigid body to a <a class="el" href="class_character_virtual.html">CharacterVirtual</a>. This allows it to interact with sensors through the regular <a class="el" href="class_contact_listener.html">ContactListener</a> and to be found by normal collision checks.</li>
</ul>
<h3><a class="anchor" id="autotoc_md72"></a>
Vehicles</h3>
<ul>
<li>Added ability to override the gravity vector per vehicle. This allows creating vehicles that can e.g. stick to the surface of a track and drive upside down. See <a class="el" href="class_vehicle_constraint.html#ad2bda8140c63b7f54330e34c5050c23a" title="Override gravity for this vehicle. Note that overriding gravity will set the gravity factor of the ve...">VehicleConstraint::OverrideGravity</a>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md73"></a>
Various</h3>
<ul>
<li>Replaced std::vector with a custom <a class="el" href="class_array.html">Array</a> class. std::vector initializes memory to zero which causes an undesired performance overhead.</li>
<li>Added macro JPH_OBJECT_STREAM that controls if <a class="el" href="class_object_stream.html" title="Base class for object stream input and output streams.">ObjectStream</a> and serialized attributes are compiled into the library or not. This can reduce the size of the library if you're not using this feature.</li>
<li>Added option to get a callback when a <a class="el" href="class_job_system_thread_pool.html">JobSystemThreadPool</a> thread starts/stops. This allows you to e.g. set application specific thread locals.</li>
<li>Added cmake option USE_ASSERTS to turn on asserts in builds other than the Debug build.</li>
<li>Switch from using _DEBUG to NDEBUG to detect debug mode. NDEBUG is defined in the standard while _DEBUG is Visual Studio specific.</li>
<li>The OVERRIDE_CXX_FLAGS cmake flag will now also work for MSVC and allow you to specify your own CMAKE_CXX_FLAGS_DEBUG/CMAKE_CXX_FLAGS_RELEASE flags</li>
<li><a class="el" href="class_body_interface.html#a9ecde691e54928413bc001db60830488">BodyInterface::AddForce</a>/Torque functions now take an optional EActivation parameter that makes it optional to activate the body. This can be used e.g. to not let the body wake up if you're applying custom gravity to a body.</li>
<li>Activating bodies now resets the sleep timer when the body is already active. This prevents the body from going to sleep in the next frame and can avoid quick 1 frame naps.</li>
<li>Added Clone function to <a class="el" href="class_mutable_compound_shape.html">MutableCompoundShape</a>. This allows creating a copy before modifying the shape.</li>
<li><a class="el" href="class_quad_tree.html">QuadTree</a> / <a class="el" href="class_fixed_size_free_list.html">FixedSizeFreeList</a>: Reorder variable layout to reduce false sharing &amp; thread syncs to reduce simulation time by approximately 5%.</li>
<li>Generate a CMake config file when the project is installed. Allows for other projects to import Jolt using the find_package() functionality.</li>
<li>Added USE_WASM_SIMD cmake option. This will enable SIMD on the emscripten WASM build.</li>
<li>Emscripten WASM build can now be compiled cross platform deterministic and deliver the same results as Windows, Linux etc.</li>
<li>Added <a class="el" href="class_shape.html#a92b9228a95f194e9e1e2962bed861e22">Shape::MakeScaleValid</a> function. This function will take a scale vector and check it against the scaling rules for the shape. If it is not valid, it will return a scale that is close to the provided scale which is valid.</li>
<li>Added cmake options to toggle exception-handling and <a class="el" href="class_r_t_t_i.html">RTTI</a>. CPP_EXCEPTIONS_ENABLED enables exceptions, CPP_RTTI_ENABLED enables <a class="el" href="class_r_t_t_i.html">RTTI</a>. By default they're both off as Jolt doesn't use these features. In the PerformanceTest this speeds up the simulation by about 5% for MSVC, no difference was measured for clang.</li>
</ul>
<h2><a class="anchor" id="autotoc_md74"></a>
Bug fixes</h2>
<ul>
<li>Fix for new warning in MSVC 17.10 in immintrin.h: '__check_isa_support': unreferenced inline function has been removed.</li>
<li>Fix error in gcc 14. Using always_inline in debug mode causes error: "inlining failed in call to 'always_inline' 'XXX': function not considered for inlining"</li>
<li>Fixed clang-18 warning "LLVMgold.so: error loading plugin ... cannot open shared object file: No such file or directory", due to <a href="https://github.com/llvm/llvm-project/issues/84271">https://github.com/llvm/llvm-project/issues/84271</a> it currently doesn't support LTO.</li>
<li>Suppress GCC warning: 'XXX' may be used uninitialized in this function [-Werror=maybe-uninitialized].</li>
<li>Fixed compile errors when compiling with GCC for the ARM platform.</li>
<li>When calling <a class="el" href="class_character_virtual.html#a8149fcb7a9f932dd5154e23588e20763">CharacterVirtual::SetShape</a>, a collision with a sensor would cause the function to abort as if the character was in collision.</li>
<li><a class="el" href="class_character_virtual.html">CharacterVirtual</a> stick to floor / stair walk did not trigger a contact added callback on the <a class="el" href="class_character_contact_listener.html">CharacterContactListener</a>.</li>
<li>Fixed bug where the the skinned position of a soft body would update in the first sub-iteration, causing a large velocity spike and jittery behavior.</li>
<li>Fixed bug where the velocity of soft body vertices would increase indefinitely when resting on the back stop of a skinned constraint.</li>
<li>Fixed bug when SkinVertices for a soft body is not called every frame, the previous position of the skin was still used causing a replay of the motion of the previous frame.</li>
<li>Fixed bug in cast ray vs soft body which caused missed collisions in case a back facing triangle was hit.</li>
<li>Fixed handling of mass override from <a class="el" href="class_soft_body_contact_listener.html">SoftBodyContactListener</a>. Previously if the inverse mass of both of the soft body and the colliding body were set to 0, the soft body would still react.</li>
<li>Fixed crash in <a class="el" href="class_ragdoll.html#a367f16f5385eb377e5419d12457c22c6" title="Drive the ragdoll to a specific pose by activating the motors on each constraint.">Ragdoll::DriveToPoseUsingMotors</a> when using constraints other than <a class="el" href="class_swing_twist_constraint.html">SwingTwistConstraint</a>.</li>
<li>Fixed -Wunused-parameter warning on GCC when building in Release mode with -Wextra.</li>
<li>Fixed tolerance in assert in GetPenetrationDepthStepEPA.</li>
<li>Due to a difference between the used instructions in NEON and SSE -<a class="el" href="class_vec3.html#ad03c52ab27761bc1e64e33c47632ba51" title="Vector with all zeros.">Vec3::sZero()</a> returned different binary results on ARM vs x86. When JPH_CROSS_PLATFORM_DETERMINISTIC is defined, we ensure that the calculation is the same now.</li>
<li>Forgot to free a temporary allocation on an early out in <a class="el" href="class_height_field_shape.html#adbd4df5017efbafc07c4187c8c6faf36">HeightFieldShape::SetMaterials</a>.</li>
<li>Fix SSE not being enabled on x86 32-bits.</li>
<li>Fixed a bug in the enhanced internal edge removal that could cause rigid bodies and characters to be affected by internal edges.</li>
<li>Fixed a bug in <a class="el" href="class_mutable_compound_shape.html#aadb711e8d328adc04397be0cf44d4f4c">MutableCompoundShape::AdjustCenterOfMass</a> which would fail to update the bounding box of the shape.</li>
<li>The 32 bit and 64 bit versions of the library now produce the same binary stream when serializing data to a <a class="el" href="class_stream_out.html" title="Simple binary output stream.">StreamOut</a>. Before some values would be stored as size_t which is platform dependent.</li>
</ul>
<h1><a class="anchor" id="autotoc_md75"></a>
v5.0.0</h1>
<h2><a class="anchor" id="autotoc_md76"></a>
New Functionality</h2>
<h3><a class="anchor" id="autotoc_md77"></a>
Soft Body</h3>
<ul>
<li>Added soft body skinning constraints. This can be used to limit the movement of soft body vertices based on a skinned mesh. See <a href="https://jrouwe.github.io/JoltPhysics/index.html#skinning-soft-bodies">documentation</a> for more info or watch this <a href="https://www.youtube.com/watch?v=NXw8yMczHJg">movie</a>.</li>
<li>Added ability to turn on/off skinning constraints and to update the max distance for all constraints with a distance multiplier.</li>
<li>Added dihedral bend constraints for soft bodies. See <a href="https://www.youtube.com/watch?v=A1iswelnGH4">movie</a>.</li>
<li>Added long range attachment constraints (also called tethers) for soft bodies.</li>
<li>Added <a class="el" href="class_soft_body_contact_listener.html">SoftBodyContactListener</a> which allows you to get callbacks for collisions between soft bodies and rigid bodies. See <a href="https://www.youtube.com/watch?v=DmS_8d2bdOw">movie</a>.</li>
<li>Added support for a vertex radius for soft bodies. This keeps the vertices a fixed distance away from the surface which can be used to avoid z-fighting while rendering the soft body.</li>
<li>Added <a class="el" href="class_soft_body_shared_settings.html#a9880c4cadc96bb24402b3cf3021aff2b">SoftBodySharedSettings::CreateConstraints</a> function that can automatically generate constraints based on the faces of the soft body.</li>
<li>Added ability to update a soft body outside of the physics simulation step using <a class="el" href="class_soft_body_motion_properties.html#ad4d7a9296f3a573698a253763391a2ef">SoftBodyMotionProperties::CustomUpdate</a>. This is e.g. useful if the soft body is teleported and needs to 'settle'.</li>
</ul>
<h3><a class="anchor" id="autotoc_md78"></a>
Vehicles</h3>
<ul>
<li>Added support for less than 1 collision test per simulation step for vehicle wheels. This behavior can be configured differently when the vehicle is active / inactive. This can be used for LODding vehicles.</li>
<li>Added wheel index to <a class="el" href="class_vehicle_constraint.html#a98e6b9822af90bf4d3a513d04acd5bc8">VehicleConstraint::CombineFunction</a> friction callback and calculating longitudinal and lateral friction in the same call so you can have more differentiation between wheels.</li>
<li>Added ability to override the max tire impulse calculations for wheeled vehicles. See <a class="el" href="class_wheeled_vehicle_controller.html#a8b57f16d22c14cc0fc7a56a81b13aca9">WheeledVehicleController::SetTireMaxImpulseCallback</a>.</li>
<li>Added ability to disable the lean steering limit for the motorcycle, turning this off makes the motorcycle more unstable, but gives you more control over the final steering angle.</li>
</ul>
<h3><a class="anchor" id="autotoc_md79"></a>
Character</h3>
<ul>
<li><a class="el" href="class_character_virtual.html">CharacterVirtual</a> will now receive an OnContactAdded callback when it collides with a sensor (but will have no further interaction).</li>
<li>Added user data to <a class="el" href="class_character_virtual.html">CharacterVirtual</a>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md80"></a>
Constraints</h3>
<ul>
<li>Swing limits do not need to be symmetrical anymore for SixDOFConstraints. This requires using the new pyramid shaped swing limits (<a class="el" href="_swing_twist_constraint_part_8h.html#add9e89df628b33308461ef46e1b796b6a5e5b0d93bab61584149905b5e5dc71a0" title="Swing is limited by a pyramid shape, note that this pyramid starts to deform for larger swing angles.">ESwingType::Pyramid</a>). SwingTwistConstraints still requires symmetrical limits but can use the pyramid swing limits too. These are cheaper to evaluate but are less smooth.</li>
<li>Twist limits no longer need to be centered around zero for SixDOFConstraints and SwingTwistConstraints, any value between -PI and PI is supported now.</li>
<li>Changed the meaning of Constraint::mNumVelocity/PositionStepsOverride. Before the number of steps would be the maximum of all constraints and the default value, now an overridden value of 0 means that the constraint uses the default value, otherwise it will use the value as specified. This means that if all constraints in an island have a lower value than the default, we will now use the lower value instead of the default. This allows simulating an island at a lower precision than the default.</li>
<li>Bodies can now also override the default number of solver iterations. This value is used when the body collides with another body and a contact constraint is created (for constraints, the constraint override is always used).</li>
<li>Added fraction hint to <a class="el" href="class_path_constraint_path.html#aa84329614fd89561c555e2af0d4381a2">PathConstraintPath::GetClosestPoint</a>. This can be used to speed up the search along the curve and to disambiguate fractions in case a path reaches the same point multiple times (i.e. a figure-8).</li>
<li>Added <a class="el" href="class_constraint.html#af6f6f7bc9ec10dbaf721515b19241294">Constraint::ResetWarmStart</a> and <a class="el" href="class_ragdoll.html#ab311adf5d4b6bd72199e6d46d04886f8" title="This function calls ResetWarmStart on all constraints. It can be used after calling SetPose to reset ...">Ragdoll::ResetWarmStart</a>. Used to notify the system that the configuration of the bodies and/or constraint has changed enough so that the warm start impulses should not be applied the next frame. You can use this function for example when repositioning a ragdoll through <a class="el" href="class_ragdoll.html#a535e76f7fb7bfee484d82570a3066ae7" title="Set the ragdoll to a pose (calls BodyInterface::SetPositionAndRotation to instantly move the ragdoll)">Ragdoll::SetPose</a> in such a way that the orientation of the bodies completely changes so that the previous frame impulses are no longer a good approximation of what the impulses will be in the next frame.</li>
<li>Multithreading the SetupVelocityConstraints job. This was causing a bottleneck in the case that there are a lot of constraints but very few possible collisions.</li>
</ul>
<h3><a class="anchor" id="autotoc_md81"></a>
Collision Detection</h3>
<ul>
<li>Created an object layer filter implementation that is similar to Bullet's group &amp; mask filtering, see <a class="el" href="class_object_layer_pair_filter_mask.html">ObjectLayerPairFilterMask</a>.</li>
<li>Created implementations of <a class="el" href="class_broad_phase_layer_interface.html" title="Interface that the application should implement to allow mapping object layers to broadphase layers.">BroadPhaseLayerInterface</a>, <a class="el" href="class_object_vs_broad_phase_layer_filter.html" title="Class to test if an object can collide with a broadphase layer. Used while finding collision pairs.">ObjectVsBroadPhaseLayerFilter</a> and <a class="el" href="class_object_layer_pair_filter.html" title="Filter class to test if two objects can collide based on their object layer. Used while finding colli...">ObjectLayerPairFilter</a> that use a bit table internally. These make it easier to define ObjectLayers and with which object layers they collide.</li>
<li>Renamed SensorDetectsStatic to CollideKinematicVsNonDynamic and made it work for non-sensors. This means that kinematic bodies can now get collision callbacks when they collide with other static / kinematic objects.</li>
<li>Added function to query the bounding box of all bodies in the physics system, see <a class="el" href="class_physics_system.html#a7f87f05d94f62054d6f3e975b613d2f0">PhysicsSystem::GetBounds</a>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md82"></a>
Simulation</h3>
<ul>
<li>Implemented enhanced internal edge removal algorithm. This should help reduce ghost collisions. See <a class="el" href="class_body_creation_settings.html#a3ff57f2892a515d062718701434601c9" title="Set to indicate that extra effort should be made to try to remove ghost contacts (collisions with int...">BodyCreationSettings::mEnhancedInternalEdgeRemoval</a> and <a href="https://www.youtube.com/watch?v=Wh5MIiiPVDE">movie</a>.</li>
<li>Added <a class="el" href="class_body_interface.html#a7f730135a74e9cb798d8a7d6c49acefb">BodyInterface::SetUseManifoldReduction</a> which will clear the contact cache and ensure that you get consistent contact callbacks in case the body that you're changing already has contacts.</li>
</ul>
<h3><a class="anchor" id="autotoc_md83"></a>
Various</h3>
<ul>
<li>Ability to enable gyroscopic forces on bodies to create the <a href="https://en.wikipedia.org/wiki/Tennis_racket_theorem">Dzhanibekov effect</a>.</li>
<li>Supporting SIMD for WASM build. Use -msimd128 -msse4.2 options with emscripten to enable this.</li>
<li>Allowing WASM build to use a custom memory allocator.</li>
<li>Added <a class="el" href="class_debug_renderer_simple.html">DebugRendererSimple</a> which can be used to simplify the creation of your own <a class="el" href="class_debug_renderer.html">DebugRenderer</a> implementation. It only requires a DrawLine, DrawTriangle and DrawText3D function to be implemented (which can be left empty).</li>
<li>Added ability to update the height field materials after creation.</li>
</ul>
<h2><a class="anchor" id="autotoc_md84"></a>
Removed functionality</h2>
<ul>
<li>Ability to restrict rotational degrees of freedom in local space, instead this is now done in world space.</li>
</ul>
<h2><a class="anchor" id="autotoc_md85"></a>
Bug fixes</h2>
<ul>
<li>Fixed a bug in cast sphere vs triangle that could return a false positive hit against a degenerate triangle.</li>
<li>Fixed bug in soft body vs tapered capsule. The calculations were slightly off causing a normal on the top or bottom sphere to be returned while the tapered part was actually closest.</li>
<li>Fixed bug where colliding a cyclinder against a large triangle could return an incorrect contact point.</li>
<li>Fixed bug where soft bodies would collide with sensors as if they were normal bodies.</li>
<li>Sensors will no longer use speculative contacts, so will no longer report contacts before an actual contact is detected.</li>
<li>Hinge limit constraint forces were clamped wrongly when the hinge was exactly at the minimum limit, making it harder to push the hinge towards the maximum limit.</li>
<li>Fixed bug when a body with limited DOFs collides with static. If the resulting contact had an infinite effective mass, we would divide by zero and crash.</li>
<li>Fixed unit tests failing when compiling for 32-bit Linux. The compiler defaults to using x87 instructions in this case which does not work well with the collision detection pipeline. Now defaulting to the SSE instructions.</li>
<li>Fixed assert and improved interaction between a fast moving rigid body of quality LinearCast and a soft body.</li>
<li>When creating a <a class="el" href="class_mesh_shape.html">MeshShape</a> with triangles that have near identical positions it was possible that the degenerate check decided that a triangle was not degenerate while the triangle in fact would be degenerate after vertex quantization. The simulation would crash when colliding with this triangle.</li>
<li>A scaled compound shape with a center of mass of non zero would not apply the correct transform to its sub shapes when colliding with a soft body</li>
<li>A soft body without any edges would hang the solver</li>
<li>Fixed GCC 11.4 warning in <a class="el" href="_job_system_thread_pool_8cpp.html">JobSystemThreadPool.cpp</a>: output may be truncated copying 15 bytes from a string of length 63</li>
<li>Longitudinal friction impulse for wheeled/tracked vehicles could become much higher than the calculated max because each iteration it was clamped to the max friction impulse which meant the total friction impulse could be <a class="el" href="struct_physics_settings.html#a66af679ba7f202b402bb23d0a0e117ad">PhysicsSettings::mNumVelocitySteps</a> times too high.</li>
<li>Properly initializing current engine RPM to min RPM for wheeled/tracked vehicles. When min RPM was lower than the default min RPM the engine would not start at min RPM.</li>
<li>Fixed a possible division by zero in <a class="el" href="class_body.html#aad1ce1d84e95cab008fb239465b3496f" title="Debug function to convert a body back to a body creation settings object to be able to save/recreate ...">Body::GetBodyCreationSettings</a> when the inverse inertia diagonal had 0's.</li>
<li>When specifying a -1 for min/max distance of a distance constraint and the calculated distance is incompatible with the other limit, we'll clamp it to that value now instead of ending up with min &gt; max.</li>
<li>Fixed bug that contact cache was partially uninitialized when colliding two objects with inv mass override of 0. When the contact listener would report a non zero inv mass override the next simulation step this would mean that the simulation would read garbage and potentially crash due to NaNs.</li>
</ul>
<h1><a class="anchor" id="autotoc_md86"></a>
v4.0.2</h1>
<h2><a class="anchor" id="autotoc_md87"></a>
New functionality</h2>
<ul>
<li>Support for compiling with ninja on Windows.</li>
</ul>
<h2><a class="anchor" id="autotoc_md88"></a>
Bug fixes</h2>
<ul>
<li>Fixed bug in Indexify function that caused it to be really slow when passing 10K identical vertices. Also fixed a problem that could have led to some vertices not being welded.</li>
<li>Fixed bug in <a class="el" href="class_six_d_o_f_constraint.html#a816d37d27455acd262a58e565445ba8d" title="Restoring state for replay.">SixDOFConstraint::RestoreState</a> that would cause motors to not properly turn on.</li>
<li>Fixed a determinism issue in <a class="el" href="class_character_virtual.html">CharacterVirtual</a>. The order of the contacts returned by GetActiveContacts() was not deterministic.</li>
<li>Fixed issue in sample application that mouse is very sensitive when viewing with Parsec.</li>
</ul>
<h1><a class="anchor" id="autotoc_md89"></a>
v4.0.1</h1>
<h2><a class="anchor" id="autotoc_md90"></a>
New functionality</h2>
<ul>
<li>Ability to stop overriding CMAKE_CXX_FLAGS_DEBUG/CMAKE_CXX_FLAGS_RELEASE which is important for Android as it uses a lot of extra flags. Set the OVERRIDE_CXX_FLAGS=NO cmake flag to enable this.</li>
<li>Reduced size of a contact constraint which saves a bit of memory during simulation.</li>
<li>Can now build a linux shared library using GCC.</li>
</ul>
<h2><a class="anchor" id="autotoc_md91"></a>
Bug fixes</h2>
<ul>
<li>Fixed mass scaling (as provided by the <a class="el" href="class_contact_listener.html">ContactListener</a>) not applied correctly to CCD objects &amp; during solve position constraints. This led to kinematic objects being pushed by dynamic objects.</li>
<li>Workaround for MSVC 17.8, limits.h doesn't include corecrt.h and triggers an error that __STDC_WANT_SECURE_LIB__ is not defined.</li>
<li>Fixed bug in MustIncludeC logic in GetClosestPointOnTriangle.</li>
<li>Removed the need for specifying -Wno-comment when compiling with GCC.</li>
</ul>
<h1><a class="anchor" id="autotoc_md92"></a>
v4.0.0</h1>
<h2><a class="anchor" id="autotoc_md93"></a>
New functionality</h2>
<ul>
<li>Added support for soft bodies (feature still in development, see <a href="https://x.com/jrouwe/status/1687051655898955776?s=20">announcement</a>).</li>
<li>Support for limiting the degrees of freedom of a body to support 2D simulations (see <a href="https://x.com/jrouwe/status/1676311800797622279?s=20">announcement</a>).</li>
<li>Support for setting surface velocity of a body (see <a href="https://x.com/jrouwe/status/1662727355553443844?s=20">announcement</a>).</li>
<li>Added ability to update a height field after creation (see <a href="https://x.com/jrouwe/status/1713670512801390829?s=20">announcement</a>).</li>
<li>Support for non-power of 2 height fields.</li>
<li>Expose a function to compare the JOLT_VERSION_ID with the version the library was compiled with to detect mismatches between library and client code.</li>
<li>Added ability to specify extra ragdoll constraints that are not parent/child related.</li>
<li>Ability to selectively save the state of a physics system to support replicating state over the network.</li>
<li>Added constraint priority to control the order of evaluation of constraints (and thereby the most influential constraints).</li>
<li>Sensors can now detect static objects.</li>
<li>Ability to override mass and inertia of bodies from the <a class="el" href="class_contact_listener.html">ContactListener</a>.</li>
<li>Ability to specify stiffness/damping for springs instead of frequency/damping.</li>
<li>Added option to disable the lean spring controller for motorcycles.</li>
<li>Added vehicle callbacks at the beginning of the step listener and after wheel checks.</li>
<li>Ability to override the position where the suspension and tire forces are applied.</li>
<li>Support for building Jolt as a shared library on Windows.</li>
<li>Optimized Indexify function from O(N^2) to O(N log(N)).</li>
</ul>
<h2><a class="anchor" id="autotoc_md94"></a>
Removed functionality</h2>
<ul>
<li>Removed support for integration sub steps for <a class="el" href="class_physics_system.html#a4cdc76b2486dfaecfc9319d040e5e5f3">PhysicsSystem::Update</a>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md95"></a>
New supported platforms</h2>
<ul>
<li>32-bit versions of Android on ARM and x86.</li>
</ul>
<h2><a class="anchor" id="autotoc_md96"></a>
Bug fixes</h2>
<ul>
<li>Motor frequency/stiffness of 0 should turn the motor off.</li>
<li><a class="el" href="class_rotated_translated_shape.html#ab7cda756537d468e9260ed98a9ddb523" title="Access the translation that has been applied to the inner shape.">RotatedTranslatedShape::GetPosition</a> returned the wrong value.</li>
<li>If a body is removed between the broad phase detecting an overlap and the narrow phase locking the body, callbacks could be called on a body that has already been removed.</li>
<li>Fixed flipped normals in EPA penetration depth algorithm which could cause the normal to point in the wrong direction for collision tests.</li>
<li>Respecting the IsSensor flag for CCD bodies.</li>
<li>Fixed double locking issue that could cause a deadlock while updating the AABB of a body during simulation.</li>
<li>Fixed a crash when fetching a body using an invalid <a class="el" href="class_body_i_d.html" title="ID of a body. This is a way of reasoning about bodies in a multithreaded simulation while avoiding ra...">BodyID</a>.</li>
<li>Windows 32 vs 64-bit versions produce the same deterministic results now.</li>
<li>Heightfield vs convex was not filled in in collision dispatch table. This caused sensors to assert and not detect collisions with heightfields.</li>
<li>The friction applied during continuous collision detection could be sqrt(2) times too large.</li>
<li>The friction was clamped independently on both tangential axis which meant that the total friction could be larger than the amount of friction that should have been allowed. It also meant that an object would slow down quicker on one axis than on another causing a curved trajectory.</li>
<li>When an object wasn't moving fast enough to trigger restitution for a speculative contact, the contact was enforced at the current position rather than at the distance of the speculative contact.</li>
<li>Fixed <a class="el" href="class_character_virtual.html">CharacterVirtual</a> jittering issue when moving down on elevator.</li>
<li><a class="el" href="class_character_virtual.html">CharacterVirtual</a> was speeding up beyond the requested speed when sliding along a wall.</li>
<li><a class="el" href="class_character_virtual.html">CharacterVirtual</a> reported to be on ground for one more frame after jumping against a wall.</li>
<li>Added missing delta time term in CharacterVirtual::DetermineConstraints.</li>
<li>CastShape had incorrect early out condition which could cause it to miss the deepest penetration.</li>
<li>Pitch/roll limit constraint for vehicles didn't work when local vehicle up did not match world up.</li>
<li><a class="el" href="class_wheel.html" title="Base class for runtime data for a wheel, each VehicleController can implement a derived class of this...">Wheel</a> contact point did not return deepest point in certain cases.</li>
<li>Fix for engine RPM being much higher than wheel RPM when measured at clutch. Before we were ignoring bake and wheel torques in engine RPM calculation.</li>
<li>Don't allow the vehicle to sleep when the transmission is switching.</li>
<li>Fixed bug that caused suspension to be weaker when driving a vehicle over dynamic bodies.</li>
</ul>
<h1><a class="anchor" id="autotoc_md97"></a>
v3.0.0</h1>
<ul>
<li>Support for double precision simulation for large worlds (see <a href="https://twitter.com/jrouwe/status/1599366630273712128">announcement</a>)</li>
<li>Performance optimization that allows solving large islands on multiple threads (see <a href="https://twitter.com/jrouwe/status/1633229953775828994">announcement</a>)</li>
<li>Vehicles now support suspensions that are at an angle with the vehicle body (instead of 90 degrees)</li>
<li>Supporting cylinder based wheels for vehicles</li>
<li>Experimental motor cycle physics (see <a href="https://twitter.com/jrouwe/status/1642479907383959553">announcement</a>)</li>
<li><a class="el" href="class_character_virtual.html">CharacterVirtual</a> can now move relative to a moving object (e.g. a space ship)</li>
<li>Added 2D physics example</li>
<li>Added functionality to estimate the collision impulse in the contact added callback</li>
<li>Added a <a class="el" href="class_job_system_with_barrier.html">JobSystemWithBarrier</a> class that makes it easier to integrate with your own job system</li>
<li>Support for 32-bit object layers to allow easier integration with existing collision filtering systems</li>
</ul>
<h1><a class="anchor" id="autotoc_md98"></a>
v2.0.1</h1>
<ul>
<li>Adds ARM 32-bit support to support vcpkg-tool</li>
</ul>
<h1><a class="anchor" id="autotoc_md99"></a>
v2.0.0</h1>
<h2><a class="anchor" id="autotoc_md100"></a>
Major new functionality</h2>
<ul>
<li>Simulation is now deterministic between Windows, Linux and macOS.</li>
<li>Support for custom memory allocators.</li>
<li>A new character class that lives outside the main simulation update and is mainly used for player movement (<a class="el" href="class_character_virtual.html">CharacterVirtual</a>).</li>
<li>Implemented skeleton mapper that can convert an animated skeleton to a ragdoll skeleton and back.</li>
<li>Rack and pinion, gear and pulley constraints have been added.</li>
<li>Ability for sensors to detect collisions with sleeping bodies.</li>
<li>Improved engine model for wheeled vehicles.</li>
<li>Most constraints can now also be configured in local space.</li>
</ul>
<h2><a class="anchor" id="autotoc_md101"></a>
New supported compilers</h2>
<ul>
<li>MinGW</li>
<li>GCC</li>
</ul>
<h2><a class="anchor" id="autotoc_md102"></a>
New supported platforms</h2>
<ul>
<li>All intel platforms supporting SSE2 and higher (was SSE4.2)</li>
<li>32-bit applications (was 64 bit only)</li>
<li>Windows on ARM</li>
<li>Windows UWP</li>
<li>macOS</li>
<li>iOS</li>
<li>WebAssembly</li>
</ul>
<h1><a class="anchor" id="autotoc_md103"></a>
v1.1.0</h1>
<ul>
<li>Optimizations.</li>
</ul>
<h1><a class="anchor" id="autotoc_md104"></a>
v1.0.0</h1>
<ul>
<li>Initial stable release. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
